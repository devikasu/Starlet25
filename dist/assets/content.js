function d(){const e=["main","article",'[role="main"]',".main-content",".content",".post-content",".entry-content","#content","#main"];for(const r of e){const a=document.querySelector(r);if(a instanceof HTMLElement)return a}const n=document.body,t=Array.from(n.querySelectorAll("div, section, article, main")).filter(r=>r instanceof HTMLElement);let o=n,s=n.innerText.length;return t.forEach(r=>{const a=r.innerText.length;a>s&&a>100&&(s=a,o=r)}),o}function m(e){["nav","header","footer","aside",".nav",".navigation",".navbar",".header",".footer",".sidebar",".advertisement",".ads",".ad",".social-share",".share-buttons",".comments",".comment-section",".related-posts",".recommendations",".breadcrumb",".breadcrumbs",".menu",".menu-item",".search",".search-box",".newsletter",".subscribe",".cookie-notice",".privacy-notice",".banner",".popup",".modal",".overlay",'[role="navigation"]','[role="banner"]','[role="complementary"]','[role="contentinfo"]','[aria-label*="navigation"]','[aria-label*="menu"]','[class*="nav"]','[class*="menu"]','[class*="header"]','[class*="footer"]','[class*="sidebar"]','[class*="ad"]','[id*="nav"]','[id*="menu"]','[id*="header"]','[id*="footer"]','[id*="sidebar"]','[id*="ad"]'].forEach(t=>{e.querySelectorAll(t).forEach(o=>{o.parentNode&&o.parentNode.removeChild(o)})}),e.querySelectorAll("script, style, noscript, iframe, embed, object").forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}function u(e){return e.replace(/\s+/g," ").replace(/\n\s*\n/g,`
`).trim()}function i(){const e=d();if(!e)return"";const n=e.cloneNode(!0);m(n);let t=n.innerText||n.textContent||"";return t=u(t),t.split(`
`).filter(s=>{const r=s.trim();return r.length>10||r.length===0}).join(`
`).trim()}function c(){const e=i();if(e.length<50){console.log("Starlet25: Not enough text content found");return}const n={type:"PAGE_TEXT",text:e,url:window.location.href,title:document.title,timestamp:Date.now()};chrome.runtime.sendMessage(n).catch(t=>{console.log("Starlet25: Error sending message to background:",t)}),console.log("Starlet25: Extracted text length:",e.length)}chrome.runtime.onMessage.addListener((e,n,t)=>{if(e.action==="EXTRACT_TEXT"){const o=i();t({text:o,url:window.location.href,title:document.title})}});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();let l=0;const f=new MutationObserver(()=>{const e=i();Math.abs(e.length-l)>100&&(l=e.length,c())});f.observe(document.body,{childList:!0,subtree:!0});
